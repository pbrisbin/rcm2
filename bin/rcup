#!/bin/sh
: ${RCM_LIB:=$(dirname "$0")/../share/rcm}
. "$RCM_LIB"/rcm.sh

usage() {
  printf "Usage: rcup [-CVqvfhikK] [-I EXCL_PAT] [-x EXCL_PAT] [-t TAG] [-d DOT_DIR]\n"
  printf "see rcup(1) and rcm(5) for more details\n"
}


process_dotfile() {
  local dotfile="$1"
  local destination="$(destination "$dotfile")"

  if [ -e "$destination" ]; then
    remove_dotfile "$dotfile" "$destination" || return 1
  fi

  install_dotfile "$dotfile" "$destination"
}

parse_options "$@" && process_dotfiles
