#!/bin/sh

: ${RCM_LIB:="$(dirname "$0")"/../share/rcm}
. $RCM_LIB/rcm.sh

process_dotfile() {
  local dotfile="$1"
  local destination="$(destination "$dotfile")"
  local directory="$(dirname "$destination")"

  if [ -e "$destination" ]; then
    if same_file "$dotfile" "$destination"; then
      debug "skipping $dotfile (exists and contents match)"
      return 0
    else
      : # TODO: force/prompt
    fi
  fi

  install_dotfile "$dotfile" "$destination"
}

parse_options "$@" && process_dotfiles
